# Intersight UCS Chassis Profiles Deployment Module

## Use this module to create UCS Chassis Profiles in Intersight

## Usage

```hcl
module "profiles_chassis" {

  source = "terraform-cisco-modules/easy-imm/intersight//modules/profiles_chassis"

  # omitted...
}
```

This module will create UCS Chassis Profiles in Intersight.  

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_intersight"></a> [intersight](#requirement\_intersight) | >=1.0.13 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_intersight"></a> [intersight](#provider\_intersight) | 1.0.13 |
| <a name="provider_terraform"></a> [terraform](#provider\_terraform) | n/a |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_policies_imc_access"></a> [policies\_imc\_access](#module\_policies\_imc\_access) | terraform-cisco-modules/imm/intersight//modules/policies_imc_access | n/a |
| <a name="module_policies_power"></a> [policies\_power](#module\_policies\_power) | terraform-cisco-modules/imm/intersight//modules/policies_power | n/a |
| <a name="module_policies_snmp"></a> [policies\_snmp](#module\_policies\_snmp) | terraform-cisco-modules/imm/intersight//modules/policies_snmp | n/a |
| <a name="module_policies_snmp_1_user"></a> [policies\_snmp\_1\_user](#module\_policies\_snmp\_1\_user) | terraform-cisco-modules/imm/intersight//modules/policies_snmp_1_user | n/a |
| <a name="module_policies_snmp_2_users"></a> [policies\_snmp\_2\_users](#module\_policies\_snmp\_2\_users) | terraform-cisco-modules/imm/intersight//modules/policies_snmp_2_users | n/a |
| <a name="module_policies_thermal"></a> [policies\_thermal](#module\_policies\_thermal) | terraform-cisco-modules/imm/intersight//modules/policies_thermal | n/a |
| <a name="module_ucs_chassis_profiles"></a> [ucs\_chassis\_profiles](#module\_ucs\_chassis\_profiles) | terraform-cisco-modules/imm/intersight//modules/chassis_profile | n/a |

## Resources

| Name | Type |
|------|------|
| [intersight_equipment_chassis.chassis](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/data-sources/equipment_chassis) | data source |
| [intersight_organization_organization.org_moid](https://registry.terraform.io/providers/CiscoDevNet/intersight/latest/docs/data-sources/organization_organization) | data source |
| [terraform_remote_state.pools](https://registry.terraform.io/providers/hashicorp/terraform/latest/docs/data-sources/remote_state) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_apikey"></a> [apikey](#input\_apikey) | Intersight API Key. | `string` | n/a | yes |
| <a name="input_endpoint"></a> [endpoint](#input\_endpoint) | Intersight URL. | `string` | `"https://intersight.com"` | no |
| <a name="input_organizations"></a> [organizations](#input\_organizations) | Intersight Organization Names. | `set(string)` | <pre>[<br>  "default"<br>]</pre> | no |
| <a name="input_policies_imc_access"></a> [policies\_imc\_access](#input\_policies\_imc\_access) | key - Name of the IMC Access Policy<br>* description - Description to Assign to the Policy.<br>* imc\_ip\_pool - Name of the IP Pool to Assign to the IMC Access Policy.<br>* inband\_vlan - VLAN ID to Assign as the Inband Management VLAN for IMC Access.<br>* ipv4\_enable - Flag to Enable or Disable the IPv4 Address Family for Poliices.<br>* ipv6\_enable - Flag to Enable or Disable the IPv6 Address Family for Poliices.<br>* organization - Name of the Intersight Organization to assign this Policy to.<br>  - https://intersight.com/an/settings/organizations/<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy. | <pre>map(object(<br>    {<br>      description  = optional(string)<br>      inband_vlan  = optional(number)<br>      imc_ip_pool  = optional(string)<br>      ipv4_enable  = optional(bool)<br>      ipv6_enable  = optional(bool)<br>      organization = optional(string)<br>      tags         = optional(list(map(string)))<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "description": "",<br>    "imc_ip_pool": "",<br>    "inband_vlan": 4,<br>    "ipv4_enable": true,<br>    "ipv6_enable": false,<br>    "organization": "default",<br>    "tags": []<br>  }<br>}</pre> | no |
| <a name="input_policies_power"></a> [policies\_power](#input\_policies\_power) | key - Name of the Power Policy.<br>* allocated\_budget - Sets the Allocated Power Budget of the System (in Watts). This field is only supported for Cisco UCS X series Chassis.<br>* description - Description to Assign to the Policy.<br>* power\_profiling - Sets the Power Profiling of the Chassis. This field is only supported for Cisco UCS X series servers.<br>  - Enabled - Set the value to Enabled.<br>  - Disabled - Set the value to Disabled.<br>* power\_restore\_state - Sets the Power Restore State of the Server.<br>  - AlwaysOff - Set the Power Restore Mode to Off.<br>  - AlwaysOn - Set the Power Restore Mode to On.<br>  - LastState - Set the Power Restore Mode to LastState.<br>* organization - Name of the Intersight Organization to assign this Policy to.<br>  - https://intersight.com/an/settings/organizations/<br>* redundancy\_mode - Sets the Power Redundancy of the System. N+2 mode is only supported for Cisco UCS X series Chassis.<br>  - Grid - Grid Mode requires two power sources. If one source fails, the surviving PSUs connected to the other source provides power to the chassis.<br>  - NotRedundant - Power Manager turns on the minimum number of PSUs required to support chassis power requirements. No Redundant PSUs are maintained.<br>  - N+1 - Power Manager turns on the minimum number of PSUs required to support chassis power requirements plus one additional PSU for redundancy.<br>  - N+2 - Power Manager turns on the minimum number of PSUs required to support chassis power requirements plus two additional PSU for redundancy. This Mode is only supported for UCS X series Chassis.<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy. | <pre>map(object(<br>    {<br>      allocated_budget    = optional(number)<br>      description         = optional(string)<br>      power_profiling     = optional(string)<br>      power_restore_state = optional(string)<br>      organization        = optional(string)<br>      redundancy_mode     = optional(string)<br>      tags                = optional(list(map(string)))<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "allocated_budget": 0,<br>    "description": "",<br>    "organization": "default",<br>    "power_profiling": "Enabled",<br>    "power_restore_state": "LastState",<br>    "redundancy_mode": "Grid",<br>    "tags": []<br>  }<br>}</pre> | no |
| <a name="input_policies_snmp"></a> [policies\_snmp](#input\_policies\_snmp) | key - Name of the SSH Policy.<br>* description - Description to Assign to the Policy.<br>* enabled - State of SSH service on the endpoint.<br>* organization - Name of the Intersight Organization to assign this Policy to.<br>  - https://intersight.com/an/settings/organizations/<br>* snmp\_access - Controls access to the information in the inventory tables. Applicable only for SNMPv1 and SNMPv2c users.<br>  - Disabled - Blocks access to the information in the inventory tables.<br>  - Full - Full access to read the information in the inventory tables.<br>  - Limited - Partial access to read the information in the inventory tables.<br>* snmp\_engine\_id - Unique string to identify the device for administration purpose. This is generated from the SNMP Input Engine ID if it is already defined, else it is derived from the BMC serial number.<br>* snmp\_port - Port on which Cisco IMC SNMP agent runs. Enter a value between 1-65535. Reserved ports not allowed (22, 23, 80, 123, 389, 443, 623, 636, 2068, 3268, 3269).  Default is 161.<br>* snmp\_trap\_destinations - List of SNMP Trap Destinations to Assign to the Policy.<br>* snmp\_user\_1\_auth\_type - Authorization protocol for authenticating the user.  Currently Options are:<br>  - MD5<br>  - SHA<br>* In the future these options will be added.<br>  - NA - Authentication protocol is not applicable.<br>  - SHA-224 - SHA-224 protocol is used to authenticate SNMP user.<br>  - SHA-256 - SHA-256 protocol is used to authenticate SNMP user.<br>  - SHA-384 - SHA-384 protocol is used to authenticate SNMP user.<br>  - SHA-512 - SHA-512 protocol is used to authenticate SNMP user.<br>* snmp\_user\_1\_name - Username. Must have a minimum of 1 and and a maximum of 31 characters.<br>* snmp\_user\_1\_security\_level - Security mechanism used for communication between agent and manager.<br>  - AuthNoPriv - The user requires an authorization password but not a privacy password.<br>  - AuthPriv - The user requires both an authorization password and a privacy password.<br>  - NoAuthNoPriv - The user does not require an authorization or privacy password.<br>* snmp\_user\_2\_auth\_type - Authorization protocol for authenticating the user.  Currently Options are:<br>  - MD5<br>  - SHA<br>* In the future these options will be added.<br>  - NA - Authentication protocol is not applicable.<br>  - SHA-224 - SHA-224 protocol is used to authenticate SNMP user.<br>  - SHA-256 - SHA-256 protocol is used to authenticate SNMP user.<br>  - SHA-384 - SHA-384 protocol is used to authenticate SNMP user.<br>  - SHA-512 - SHA-512 protocol is used to authenticate SNMP user.<br>* snmp\_user\_2\_name - Username. Must have a minimum of 1 and and a maximum of 31 characters.<br>* snmp\_user\_2\_security\_level - Security mechanism used for communication between agent and manager.<br>  - AuthNoPriv - The user requires an authorization password but not a privacy password.<br>  - AuthPriv - The user requires both an authorization password and a privacy password.<br>  - NoAuthNoPriv - The user does not require an authorization or privacy password.<br>* system\_contact - Contact person responsible for the SNMP implementation. Enter a string up to 64 characters, such as an email address or a name and telephone number.<br>* system\_location - Location of host on which the SNMP agent (server) runs.<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy. | <pre>map(object(<br>    {<br>      description                = optional(string)<br>      enabled                    = optional(bool)<br>      organization               = optional(string)<br>      snmp_access                = optional(string)<br>      snmp_engine_id             = optional(string)<br>      snmp_port                  = optional(number)<br>      snmp_trap_destinations     = optional(list(map(string)))<br>      snmp_user_1_auth_type      = optional(string)<br>      snmp_user_1_name           = optional(string)<br>      snmp_user_1_security_level = optional(string)<br>      snmp_user_2_auth_type      = optional(string)<br>      snmp_user_2_name           = optional(string)<br>      snmp_user_2_security_level = optional(string)<br>      system_contact             = optional(string)<br>      system_location            = optional(string)<br>      tags                       = optional(list(map(string)))<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "description": "",<br>    "enabled": true,<br>    "organization": "default",<br>    "snmp_access": "Full",<br>    "snmp_engine_id": "",<br>    "snmp_port": 161,<br>    "snmp_trap_destinations": [],<br>    "snmp_user_1_auth_type": "SHA",<br>    "snmp_user_1_name": "",<br>    "snmp_user_1_security_level": "AuthPriv",<br>    "snmp_user_2_auth_type": "SHA",<br>    "snmp_user_2_name": "",<br>    "snmp_user_2_security_level": "AuthPriv",<br>    "system_contact": "",<br>    "system_location": "",<br>    "tags": []<br>  }<br>}</pre> | no |
| <a name="input_policies_thermal"></a> [policies\_thermal](#input\_policies\_thermal) | key - Name of the Power Policy.<br>* description - Description to Assign to the Policy.<br>* fan\_control\_mode - Sets the Fan Control Mode of the System. High Power, Maximum Power and Acoustic modes are only supported for Cisco UCS X series Chassis.<br>  - Acoustic - The fan speed is reduced to reduce noise levels in acoustic-sensitive environments. This Mode is only supported for UCS X series Chassis.<br>  - Balanced - The fans run faster when needed based on the heat generated by the chassis. When possible, the fans returns to the minimum required speed.<br>  - LowPower - The Fans run at the minimum speed required to keep the chassis cool.<br>  - HighPower - The fans are kept at higher speed to emphasizes performance over power consumption. This Mode is only supported for UCS X series Chassis.<br>  - MaximumPower - The fans are always kept at maximum speed. This option provides the most cooling and consumes the most power. This Mode is only supported for UCS X series Chassis.<br>* organization - Name of the Intersight Organization to assign this Policy to.<br>  - https://intersight.com/an/settings/organizations/<br>* tags - List of Key/Value Pairs to Assign as Attributes to the Policy. | <pre>map(object(<br>    {<br>      description      = optional(string)<br>      fan_control_mode = optional(string)<br>      organization     = optional(string)<br>      tags             = optional(list(map(string)))<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "description": "",<br>    "fan_control_mode": "Balanced",<br>    "organization": "default",<br>    "tags": []<br>  }<br>}</pre> | no |
| <a name="input_secretkey"></a> [secretkey](#input\_secretkey) | Intersight Secret Key. | `string` | n/a | yes |
| <a name="input_snmp_community"></a> [snmp\_community](#input\_snmp\_community) | The default SNMPv1, SNMPv2c community name or SNMPv3 username to include on any trap messages sent to the SNMP host. The name can be 18 characters long. | `string` | `""` | no |
| <a name="input_snmp_trap_community"></a> [snmp\_trap\_community](#input\_snmp\_trap\_community) | The default SNMPv1, SNMPv2c community name or SNMPv3 username to include on any trap messages sent to the SNMP host. The name can be 18 characters long. | `string` | `""` | no |
| <a name="input_snmp_user_1_auth_password"></a> [snmp\_user\_1\_auth\_password](#input\_snmp\_user\_1\_auth\_password) | Authorization password for the user. | `string` | `""` | no |
| <a name="input_snmp_user_1_privacy_password"></a> [snmp\_user\_1\_privacy\_password](#input\_snmp\_user\_1\_privacy\_password) | Privacy password for the user. | `string` | `""` | no |
| <a name="input_snmp_user_2_auth_password"></a> [snmp\_user\_2\_auth\_password](#input\_snmp\_user\_2\_auth\_password) | Authorization password for the user. | `string` | `""` | no |
| <a name="input_snmp_user_2_privacy_password"></a> [snmp\_user\_2\_privacy\_password](#input\_snmp\_user\_2\_privacy\_password) | Privacy password for the user. | `string` | `""` | no |
| <a name="input_tags"></a> [tags](#input\_tags) | List of Key/Value Pairs to Assign as Attributes to the Policy. | `list(map(string))` | `[]` | no |
| <a name="input_tfc_organization"></a> [tfc\_organization](#input\_tfc\_organization) | Terraform Cloud Organization. | `string` | n/a | yes |
| <a name="input_ucs_chassis_profiles"></a> [ucs\_chassis\_profiles](#input\_ucs\_chassis\_profiles) | key - Serial Number of the Chassis.<br>* action - Action to Perform on the Chassis Profile Assignment.  Options are:<br>  - Deploy<br>  - No-op<br>  - Unassign<br>* assigned\_chassis - A reference to a equipmentChassis resource.<br>* description - Description for the Profile.<br>* name - If Name is not specified the Serial Will be assigned as the Hostname.<br>* src\_template - The Name of the ucs\_chassis\_template to apply to the chassis.<br>* tags -<br>* wait\_for\_completion - | <pre>map(object(<br>    {<br>      action              = optional(string)<br>      assigned_chassis    = optional(bool)<br>      description         = optional(string)<br>      name                = optional(string)<br>      src_template        = optional(string)<br>      tags                = optional(list(map(string)))<br>      wait_for_completion = optional(bool)<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "action": "No-op",<br>    "assigned_chassis": false,<br>    "description": "",<br>    "name": "",<br>    "src_template": "",<br>    "tags": [],<br>    "wait_for_completion": false<br>  }<br>}</pre> | no |
| <a name="input_ucs_chassis_templates"></a> [ucs\_chassis\_templates](#input\_ucs\_chassis\_templates) | key - Name of the UCS Chassis Template.<br>* organization - Name of the Intersight Organization to assign this Profile to.  Default is default.<br>  -  https://intersight.com/an/settings/organizations/<br>* policies\_imc\_access - Name of the IMC Access Policy Created.<br>* policies\_power - Name of the Power Policy Created.<br>* policies\_snmp - Name of the SNMP Policy Created.<br>* policies\_snmp\_1\_user - Name of the SNMP Policy Created.<br>* policies\_snmp\_2\_users - Name of the SNMP Policy Created.<br>* policies\_thermal - Name of the Thermal Policy Created.<br>* target\_platform - The platform for which the chassis profile is applicable. It can either be a chassis that is operating in standalone mode or which is attached to a Fabric Interconnect managed by Intersight.<br>  - FIAttached - Chassis which are connected to a Fabric Interconnect that is managed by Intersight. | <pre>map(object(<br>    {<br>      organization          = optional(string)<br>      policies_imc_access   = optional(string)<br>      policies_power        = optional(string)<br>      policies_snmp         = optional(string)<br>      policies_snmp_1_user  = optional(string)<br>      policies_snmp_2_users = optional(string)<br>      policies_thermal      = optional(string)<br>      target_platform       = optional(string)<br>    }<br>  ))</pre> | <pre>{<br>  "default": {<br>    "organization": "default",<br>    "policies_imc_access": "",<br>    "policies_power": "",<br>    "policies_snmp": "",<br>    "policies_snmp_1_user": "",<br>    "policies_snmp_2_users": "",<br>    "policies_thermal": "",<br>    "target_platform": "FIAttached"<br>  }<br>}</pre> | no |
| <a name="input_ws_pools"></a> [ws\_pools](#input\_ws\_pools) | Pools Workspace Name. | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_physical_chassis"></a> [physical\_chassis](#output\_physical\_chassis) | Moid of the Physical Chassis in the Account. |
| <a name="output_policies_imc_access"></a> [policies\_imc\_access](#output\_policies\_imc\_access) | n/a |
| <a name="output_policies_power"></a> [policies\_power](#output\_policies\_power) | n/a |
| <a name="output_policies_snmp"></a> [policies\_snmp](#output\_policies\_snmp) | n/a |
| <a name="output_policies_snmp_1_user"></a> [policies\_snmp\_1\_user](#output\_policies\_snmp\_1\_user) | n/a |
| <a name="output_policies_snmp_2_users"></a> [policies\_snmp\_2\_users](#output\_policies\_snmp\_2\_users) | n/a |
| <a name="output_policies_thermal"></a> [policies\_thermal](#output\_policies\_thermal) | n/a |
| <a name="output_ucs_chassis_profiles"></a> [ucs\_chassis\_profiles](#output\_ucs\_chassis\_profiles) | moid of the UCS Chassis Profiles. |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
